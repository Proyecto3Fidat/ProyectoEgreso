<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../Public/css/listaClienteAdmin.css">
    <link rel="stylesheet" href="../../Public/css/responsive.css">
    <script src="https://kit.fontawesome.com/58f9dcf30d.js" crossorigin="anonymous"></script>
    <title>Lista de Clientes</title>
    <style>
        /* Pantalla de carga (preloader) */
        #preloader {
            position: fixed;
            width: 100%;
            height: 100%;
            background: #000000; /* Fondo negro para la pantalla de carga */
            top: 0;
            left: 0;
            z-index: 9999; /* Asegurarse de que esté sobre todos los demás elementos */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db; /* Color del spinner */
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body>
<header>
    <section class="navhead">
        <button class="abrirmenu" id="abrir"><i class="fa-solid fa-bars fa-xl" style="color: #ffffff;"></i></button>
    </section>
    <nav class="navbar" id="nav">
        <button class="cerrarmenu" id="cerrar"><i class="fa-solid fa-right-from-bracket fa-xl"
                                                  style="color: #ffffff;"></i></button>
        <div class="menu1">
            <ul class="listmenu1">
                <li><a href="/" class="inicioa">Inicio</a></li>
                <li><a href="/horarios" class="inicioa">Horarios</a></li>
                <li><a href="/planes" class="inicioa">Planes</a></li>
                <li><a href="/">Nosotros</a></li>
            </ul>
        </div>
        <div class="menu2">
            <ul class="listmenu2" id="welcome-message">
            </ul>
        </div>
    </nav>
</header>
<ul class="listmenu2" id="welcome-message">
</ul>

<section class="listaclientes">
    <table class="lista-clientes" id="tablaClientes">
        <tbody>
        <tr>
            <th> Nombre de Cliente</th>
            <th> Documento</th>
            <th>Rol</th>
        </tr>
        </tbody>
    </table>
</section>
<div class="fichagnrl" id="fichagnl">
    <h4>Ficha técnica de </h4>
    <button class="cerrarficha" id="cerrarficha" data-cliente-id=""><i class="fa-solid fa-xmark fa-2xl"
                                                                       style="color: #ffffff;"></i></button>
    <div class="divficha-container">
                <div class="imgCliente"> 
                    <img src="../../images/clienteEjm.png"/>
                </div>
        <div class="divficha">
            <p>Documento: </p>
            <p>Tipo de Documento: </p>
            <p>Edad:</p>
            <p>Email: </p>
            <p>Teléfono: </p>
            <p>Dirección:</p>
        </div>
        <div class="divficha2">
            <p>Nombre de plan: </p>
            <p>Tipo de plan: </p>
            <p>Fecha de Vencimiento: </p>
        </div>
        <div class="divficha3">
            <p>Fecha de agenda: </p>
            <p>Dia de la agenda: </p>
            <p>Hora de inicio: </p>
            <p>Hora de finalizacion: </p>
            <p>Verificacion de asistencia: </p>
        </div>
        <section>
            
        </section>
    </div>
            <div class="btnpago">
                <form method="get" action="/pago">
                    <input type="hidden" name="documento" value="">
                    <button type="submit" class="adrut">Ingresar Pago</button>
                    <button type="submit" class="adrut">Agendar</button>
                </form>
            </div>
</div>
<!-- Modal para iframe -->
<div id="modal-overlay" class="modal-overlay">
    <div class="modal-content">
        <button class="modal-close-button">
            <span class="X"></span>
            <span class="Y"></span>
            <div class="close">Close</div>
        </button>
        <iframe id="form-iframe" src="" frameborder="0" width="100%" height="500px"></iframe>
    </div>
</div>

<style>
    /* Estilo mejorado para el fondo del modal */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8); /* Hacerlo más oscuro para más contraste */
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 999;
    }

    /* Estilo mejorado del contenido del modal */
    .modal-content {
        background: #1e1c1f; /* Coincide con el formulario */
        padding: 40px;
        border-radius: 15px;
        border: 5px solid #7a3afa;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5); /* Sombras más suaves */
        position: relative;
        max-width: 700px;
        width: 90%;
        animation: fadeIn 0.3s ease-out;
    }

    /* Efecto de entrada suave */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .modal-close-button {
        position: absolute;
        top: 10px;
        right: 10px;
        width: 3em;
        height: 3em;
        border: none;
        background: rgba(255, 0, 0, 0.1); /* Fondo suave */
        border-radius: 50%;
        cursor: pointer;
        transition: background 0.5s, box-shadow 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000; /* Asegura que esté sobre el modal */
    }

    /* Líneas de la "X" */
    .X, .Y {
        position: absolute;
        width: 1.5em;
        height: 2px;
        background-color: #ffffff;
        transition: transform 0.3s ease, background-color 0.3s ease;
    }

    .X {
        transform: rotate(45deg);
    }

    .Y {
        transform: rotate(-45deg);
    }

    /* Texto de "Close" emergente */
    .modal-close-button .close {
        position: absolute;
        display: flex;
        padding: 0.8rem 1.5rem;
        align-items: center;
        justify-content: center;
        transform: translateX(-50%);
        top: -80%;
        left: 50%;
        width: 4em;
        height: 2em;
        font-size: 12px;
        background-color: rgb(19, 22, 24);
        color: rgb(187, 229, 236);
        border: none;
        border-radius: 3px;
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .modal-close-button:hover {
        background-color: rgba(239, 9, 9, 0.2);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .modal-close-button:active {
        background-color: rgb(236, 11, 11);
    }

    .modal-close-button:hover > .close {
        opacity: 1;
    }

    .modal-close-button:hover > .X,
    .modal-close-button:hover > .Y {
        background-color: #ffcccc;
    }

</style>

<!-- Modal para ingresar local -->
<div id="modal-ingresar-local" class="modal-overlay">
    <div class="modal-content">
        <button class="modal-close-button">
            <span class="X"></span>
            <span class="Y"></span>
            <div class="close">Close</div>
        </button>
        <iframe id="iframe-ingresar-local" src="" frameborder="0" width="100%" height="500px"></iframe>
    </div>
</div>
<!-- Modal para agenda -->
<div id="modal-agenda" class="modal-overlay">
    <div class="modal-content">
        <button class="modal-close-button">
            <span class="X"></span>
            <span class="Y"></span>
            <div class="close">Close</div>
        </button>
        <iframe id="iframe-agenda" src="" frameborder="0" width="100%" height="500px"></iframe>
    </div>
</div>

<div class="containerBotonesAgenda">
<!-- Botones para Ingresar Local y Agenda -->
<button id="btnIngresarLocal" class="btnCargarMas">Ingresar Local</button>
<button id="btnAgenda" class="btnCargarMas">Agenda</button>
</div>

<form class="upLogo" action="/logo" method="post" enctype="multipart/form-data">
    <label for="fileToUpload">Subir logo de la pagina:</label>
    <input type="file" name="logo" id="fileToUpload">
    <input type="submit" value="Subir archivo" name="submit">
</form>
<script src="../../Public/js/listaUsuariosAdmin.js"></script>
<script src="../../Public/js/script.js"></script>
<script src="../../Public/js/responsive.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Obtener referencias a los elementos del modal de pago/agendar
        const modalOverlay = document.getElementById('modal-overlay');
        const iframe = document.getElementById('form-iframe');
        const closeModalButton = modalOverlay.querySelector('.modal-close-button');

        // Agregar eventos a los botones de Ingresar Pago y Agendar
        document.querySelectorAll('.btnpago button').forEach(button => {
            button.addEventListener('click', function (event) {
                event.preventDefault();
                const actionType = button.textContent.trim();
                let url = '';

                if (actionType === 'Ingresar Pago') {
                    const documento = button.form.querySelector('input[name="documento"]').value;
                    url = `/pago?documento=${documento}`;
                } else if (actionType === 'Agendar') {
                    const documento = button.form.querySelector('input[name="documento"]').value;
                    url = `/agendar?documento=${documento}`;
                }

                // Abrir el modal y cargar la URL en el iframe
                iframe.src = url;
                modalOverlay.style.display = 'flex';
            });
        });

        // Agregar evento para cerrar el modal de pago/agendar
        closeModalButton.addEventListener('click', function () {
            modalOverlay.style.display = 'none';
            iframe.src = ''; // Limpiar el src del iframe
        });

        // Cerrar el modal cuando se haga clic fuera del contenido del modal de pago/agendar
        modalOverlay.addEventListener('click', function (event) {
            if (event.target === modalOverlay) {
                modalOverlay.style.display = 'none';
                iframe.src = ''; // Limpiar el src del iframe
            }
        });

        // Obtener referencias a los elementos del modal de ingresar local
        const modalIngresarLocal = document.getElementById('modal-ingresar-local');
        const iframeIngresarLocal = document.getElementById('iframe-ingresar-local');
        const closeModalIngresarLocalButton = modalIngresarLocal.querySelector('.modal-close-button');

        // Agregar evento al botón Ingresar Local
        const btnIngresarLocal = document.getElementById('btnIngresarLocal');
        btnIngresarLocal.addEventListener('click', function () {
            iframeIngresarLocal.src = '/ingresarGym'; // URL del contenido del iframe
            modalIngresarLocal.style.display = 'flex'; // Mostrar el modal
        });

        // Agregar evento para cerrar el modal de ingresar local
        closeModalIngresarLocalButton.addEventListener('click', function () {
            modalIngresarLocal.style.display = 'none';
            iframeIngresarLocal.src = ''; // Limpiar el src del iframe
        });

        // Cerrar el modal cuando se haga clic fuera del contenido del modal de ingresar local
        modalIngresarLocal.addEventListener('click', function (event) {
            if (event.target === modalIngresarLocal) {
                modalIngresarLocal.style.display = 'none';
                iframeIngresarLocal.src = ''; // Limpiar el src del iframe
            }
        });

        // Obtener referencias a los elementos del modal de agenda
        const modalAgenda = document.getElementById('modal-agenda');
        const iframeAgenda = document.getElementById('iframe-agenda');
        const closeModalAgendaButton = modalAgenda.querySelector('.modal-close-button');

        // Agregar evento al botón Agenda
        const btnAgenda = document.getElementById('btnAgenda');
        btnAgenda.addEventListener('click', function () {
            iframeAgenda.src = '/dashAgenda'; // URL del contenido del iframe
            modalAgenda.style.display = 'flex'; // Mostrar el modal
        });

        // Agregar evento para cerrar el modal de agenda
        closeModalAgendaButton.addEventListener('click', function () {
            modalAgenda.style.display = 'none';
            iframeAgenda.src = ''; // Limpiar el src del iframe
        });

        // Cerrar el modal cuando se haga clic fuera del contenido del modal de agenda
        modalAgenda.addEventListener('click', function (event) {
            if (event.target === modalAgenda) {
                modalAgenda.style.display = 'none';
                iframeAgenda.src = ''; // Limpiar el src del iframe
            }
        });
    });
</script>



</body>

</html>
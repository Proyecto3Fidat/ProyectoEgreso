<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../Public/css/styleentrenador.css">
    <link rel="stylesheet" href="../../Public/css/responsive.css">
    <link rel="stylesheet" href="../../Public/css/formEjercicio.css">
    <script src="https://kit.fontawesome.com/58f9dcf30d.js" crossorigin="anonymous"></script>
    <title>Entrenador</title>
    <style>
        /* Estilo para el fondo del modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 999;
        }

        /* Estilo del contenido del modal */
        .modal-content {
            background: transparent;
            padding: 0;
            border-radius: 15px;
            border: 5px solid #007bff;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            position: relative;
            display: inline-block;
        }

        /* Estilo del botón de cierre del modal */
        .btn-close-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 1.2em;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-close-modal:hover {
            background-color: #c82333;
        }

        /* Estilo para los nuevos botones del modal */
        .btn-modal-form {
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 10px;
        }

        .btn-modal-form:hover {
            background-color: #218838;
        }

        /* Ajuste del formulario para eliminar espacio superior e inferior */
        #formulario-crear-ejercicio form {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
    </style>
</head>
<body>
<!-- Resto del código existente -->
<a class="tituloent" href="#">Bienvenido, Usuario</a>

<div class="btnent">
    <a href="/listaclientes"><button class="clienteslist">Lista de clientes</button></a>
    <a href="/listaejercicios"><button class="ejerciciolist">Lista de ejercicios</button></a>
    <button id="btn-crear-ejercicio" class="btn-modal">Crear Ejercicio</button>
</div>

<div id="modal-overlay" class="modal-overlay">
    <div class="modal-content">
        <button class="btn-close-modal">&times;</button>
        <div id="formulario-crear-ejercicio"></div>
    </div>
</div>

<section class="agenda">
    <h1>HORARIOS</h1>
    <table class="horarios">
        <tr id="diasagenda">
            <th data-label="Hora">Hora</th>
            <th data-label="Lunes">Lunes</th>
            <th data-label="Martes">Martes</th>
            <th data-label="Miércoles">Miércoles</th>
            <th data-label="Jueves">Jueves</th>
            <th data-label="Viernes">Viernes</th>
        </tr>
        <tr>
            <th data-label="Hora">7:00 a 8:00</th>
            <td data-label="Lunes">Pilates</td>
            <td data-label="Martes">Gimnasio Libre</td>
            <td data-label="Miércoles">Estiramiento</td>
            <td data-label="Jueves">Pilates</td>
            <td data-label="Viernes" id="td-final">Boxeo</td>
        </tr>
        <tr>
            <th data-label="Hora">8:30 a 9:45</th>
            <td data-label="Lunes">Gimnasio Libre</td>
            <td data-label="Martes">Pilates</td>
            <td data-label="Miércoles">Recuperación Muscular</td>
            <td data-label="Jueves">Cardio</td>
            <td data-label="Viernes" id="td-final">Gimnasio Libre</td>
        </tr>
        <tr>
            <th data-label="Hora">9:45 a 10:30</th>
            <td data-label="Lunes">Caminadora</td>
            <td data-label="Martes">Boxeo</td>
            <td data-label="Miércoles">Masajes</td>
            <td data-label="Jueves">Boxeo</td>
            <td data-label="Viernes" id="td-final">Cardio</td>
        </tr>
        <tr>
            <th data-label="Hora">9:45 a 10:30</th>
            <td data-label="Lunes">Boxeo</td>
            <td data-label="Martes">Cardio</td>
            <td data-label="Miércoles">Fortalecimiento de tendones</td>
            <td data-label="Jueves">Tren Inferior</td>
            <td data-label="Viernes" id="td-final">Tren Superior</td>
        </tr>
        <tr>
            <th data-label="Hora">11:00 a 12:00</th>
            <td data-label="Lunes">Tren Superior</td>
            <td data-label="Martes">Tren Inferior</td>
            <td data-label="Miércoles">Libre</td>
            <td data-label="Jueves">Tren Superior</td>
            <td data-label="Viernes" id="td-final">Recuperación Muscular</td>
        </tr>
        <tr>
            <th data-label="Hora">12:15 a 13:45</th>
            <td data-label="Lunes">Cardio</td>
            <td data-label="Martes">Caminadora</td>
            <td data-label="Miércoles">Tren Superior</td>
            <td data-label="Jueves">Fortalecimiento de tendones</td>
            <td data-label="Viernes" id="td-final">Caminadora</td>
        </tr>
        <tr>
            <th data-label="Hora">14:00 a 15:00</th>
            <td data-label="Lunes">Tren Inferior</td>
            <td data-label="Martes">Tren Superior</td>
            <td data-label="Miércoles">Cardio</td>
            <td data-label="Jueves">Estiramiento</td>
            <td data-label="Viernes" id="td-final">Masajes</td>
        </tr>
    </table>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const btnCrearEjercicio = document.getElementById('btn-crear-ejercicio');
        const modalOverlay = document.getElementById('modal-overlay');
        const closeModalButton = document.querySelector('.btn-close-modal');
        const contenedorFormulario = document.getElementById('formulario-crear-ejercicio');

        btnCrearEjercicio.addEventListener('click', function () {
            fetch('/crearEjercicio')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Error en la respuesta del servidor');
                    }
                    return response.text(); // Obtener el HTML como texto
                })
                .then(html => {
                    contenedorFormulario.innerHTML = html; // Insertar el HTML del formulario
                    modalOverlay.style.display = 'flex'; // Mostrar el modal

                    // Agregar clase personalizada a los botones del formulario
                    const formButtons = contenedorFormulario.querySelectorAll('input[type="submit"]');
                    formButtons.forEach(button => {
                        button.classList.add('btn-modal-form');
                    });
                })
                .catch(error => {
                    console.error('Hubo un problema con la solicitud:', error);
                    alert('Hubo un problema al cargar el formulario. Intente nuevamente.');
                });
        });

        closeModalButton.addEventListener('click', function () {
            modalOverlay.style.display = 'none'; // Ocultar el modal
        });

        // Cerrar el modal al hacer clic fuera del contenido
        modalOverlay.addEventListener('click', function (event) {
            if (event.target === modalOverlay) {
                modalOverlay.style.display = 'none';
            }
        });
    });
</script>

{% include 'footer.html.twig' %}
<script src="../../Public/js/script.js"></script>
<script src="../../Public/js/responsive.js"></script>
</body>
</html>